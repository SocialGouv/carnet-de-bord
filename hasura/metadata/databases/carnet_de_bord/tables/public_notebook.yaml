table:
  name: notebook
  schema: public
configuration:
  custom_column_names:
    beneficiary_id: beneficiaryId
    contract_sign_date: contractSignDate
    contract_type: contractType
    created_at: createdAt
    education_level: educationLevel
    geographical_area: geographicalArea
    right_are: rightAre
    right_ass: rightAss
    right_bonus: rightBonus
    right_rqth: rightRqth
    right_rsa: rightRsa
    updated_at: updatedAt
    work_situation: workSituation
    work_situation_date: workSituationDate
  custom_root_fields: {}
object_relationships:
- name: beneficiary
  using:
    foreign_key_constraint_on: beneficiary_id
array_relationships:
- name: events
  using:
    foreign_key_constraint_on:
      column: notebook_id
      table:
        name: notebook_event
        schema: public
- name: focuses
  using:
    foreign_key_constraint_on:
      column: notebook_id
      table:
        name: notebook_focus
        schema: public
- name: members
  using:
    foreign_key_constraint_on:
      column: notebook_id
      table:
        name: notebook_member
        schema: public
- name: wantedJobs
  using:
    foreign_key_constraint_on:
      column: notebook_id
      table:
        name: wanted_job
        schema: public
computed_fields:
- comment: return the number of professionnal for a notebook
  definition:
    function:
      name: nb_member
      schema: public
  name: nbMembers
insert_permissions:
- permission:
    backend_only: false
    check: {}
    columns:
    - beneficiary_id
    - contract_sign_date
    - contract_type
    - created_at
    - education_level
    - geographical_area
    - id
    - right_are
    - right_ass
    - right_bonus
    - right_rqth
    - right_rsa
    - work_situation
    - work_situation_date
  role: admin_cdb
- permission:
    backend_only: false
    check:
      beneficiary:
        deployment_id:
          _eq: X-Hasura-Deployment-Id
    columns:
    - beneficiary_id
    - contract_sign_date
    - contract_type
    - created_at
    - education_level
    - geographical_area
    - id
    - right_are
    - right_ass
    - right_bonus
    - right_rqth
    - right_rsa
    - work_situation
    - work_situation_date
  role: manager
- permission:
    backend_only: false
    check: {}
    columns:
    - beneficiary_id
    - contract_sign_date
    - contract_type
    - created_at
    - education_level
    - geographical_area
    - right_are
    - right_ass
    - right_bonus
    - right_rqth
    - right_rsa
    - work_situation
    - work_situation_date
  role: professional
select_permissions:
- permission:
    allow_aggregations: true
    columns:
    - beneficiary_id
    - contract_sign_date
    - contract_type
    - created_at
    - education_level
    - geographical_area
    - id
    - right_are
    - right_ass
    - right_bonus
    - right_rqth
    - right_rsa
    - updated_at
    - work_situation
    - work_situation_date
    filter: {}
  role: admin_cdb
- permission:
    allow_aggregations: true
    columns:
    - beneficiary_id
    - contract_sign_date
    - contract_type
    - created_at
    - education_level
    - geographical_area
    - id
    - right_are
    - right_ass
    - right_bonus
    - right_rqth
    - right_rsa
    - updated_at
    - work_situation
    - work_situation_date
    computed_fields:
    - nbMembers
    filter:
      _or:
      - members:
          professional:
            structure:
              admins:
                admin_structure_id:
                  _eq: X-Hasura-AdminStructure-Id
      - beneficiary:
          structures:
            structure:
              admins:
                admin_structure_id:
                  _eq: X-Hasura-AdminStructure-Id
  role: admin_structure
- permission:
    columns:
    - beneficiary_id
    - contract_sign_date
    - contract_type
    - created_at
    - education_level
    - geographical_area
    - id
    - right_are
    - right_ass
    - right_bonus
    - right_rqth
    - right_rsa
    - updated_at
    - work_situation
    - work_situation_date
    computed_fields:
    - nbMembers
    filter:
      beneficiary_id:
        _eq: X-Hasura-Beneficiary-Id
  role: beneficiary
- permission:
    allow_aggregations: true
    columns:
    - beneficiary_id
    - contract_sign_date
    - contract_type
    - created_at
    - education_level
    - geographical_area
    - id
    - right_are
    - right_ass
    - right_bonus
    - right_rqth
    - right_rsa
    - updated_at
    - work_situation
    - work_situation_date
    computed_fields:
    - nbMembers
    filter:
      beneficiary:
        deployment_id:
          _eq: X-Hasura-Deployment-Id
  role: manager
- permission:
    allow_aggregations: true
    columns:
    - beneficiary_id
    - contract_sign_date
    - contract_type
    - created_at
    - education_level
    - geographical_area
    - id
    - right_are
    - right_ass
    - right_bonus
    - right_rqth
    - right_rsa
    - updated_at
    - work_situation
    - work_situation_date
    filter:
      members:
        _and:
        - professional_id:
            _eq: X-Hasura-Professional-Id
        - active:
            _eq: true
  role: professional
update_permissions:
- permission:
    check: {}
    columns:
    - right_are
    - right_ass
    - right_bonus
    - right_rqth
    - contract_type
    - education_level
    - geographical_area
    - right_rsa
    - work_situation
    - contract_sign_date
    - work_situation_date
    - created_at
    - beneficiary_id
    - id
    filter: {}
  role: admin_cdb
- permission:
    check: null
    columns:
    - contract_sign_date
    - contract_type
    - created_at
    - education_level
    - geographical_area
    - right_are
    - right_ass
    - right_bonus
    - right_rqth
    - right_rsa
    - work_situation
    - work_situation_date
    filter:
      members:
        _and:
        - professional_id:
            _eq: X-Hasura-Professional-Id
        - active:
            _eq: true
  role: professional
