// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`kosko generate --prod 1`] = `
"---
apiVersion: apps/v1
kind: Deployment
metadata:
  annotations:
    kapp.k14s.io/disable-default-ownership-label-rules: ''
    kapp.k14s.io/disable-default-label-scoping-rules: ''
    kapp.k14s.io/delete-strategy: orphan
    app.github.com/job: '5678'
    app.github.com/ref: refs/tags/v1.2.3
    app.github.com/repo: socialgouv/carnet-de-bord
    app.github.com/run: '1234'
    app.github.com/sha: '0123456'
  labels:
    app: app
    application: carnet-de-bord
    component: carnet-de-bord
    owner: carnet-de-bord
    team: carnet-de-bord
  name: app
  namespace: carnet-de-bord
spec:
  replicas: 1
  selector:
    matchLabels:
      app: app
  template:
    metadata:
      annotations:
        kapp.k14s.io/disable-default-ownership-label-rules: ''
        kapp.k14s.io/disable-default-label-scoping-rules: ''
        kapp.k14s.io/delete-strategy: orphan
        app.github.com/job: '5678'
        app.github.com/ref: refs/tags/v1.2.3
        app.github.com/repo: socialgouv/carnet-de-bord
        app.github.com/run: '1234'
        app.github.com/sha: '0123456'
      labels:
        app: app
        application: carnet-de-bord
        component: carnet-de-bord
        owner: carnet-de-bord
        team: carnet-de-bord
    spec:
      containers:
        - image: ghcr.io/socialgouv/carnet-de-bord/app:1.2.3
          livenessProbe:
            failureThreshold: 6
            httpGet:
              path: /healthz
              port: 3000
            initialDelaySeconds: 30
            periodSeconds: 15
            timeoutSeconds: 5
          name: app
          ports:
            - containerPort: 3000
              name: http
          readinessProbe:
            failureThreshold: 15
            httpGet:
              path: /healthz
              port: 3000
            initialDelaySeconds: 30
            periodSeconds: 15
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: 200m
              memory: 256Mi
            requests:
              cpu: 50m
              memory: 128Mi
          startupProbe:
            failureThreshold: 12
            httpGet:
              path: /healthz
              port: 3000
            periodSeconds: 15
            initialDelaySeconds: 30
          envFrom:
            - secretRef:
                name: azure-pg-user
            - secretRef:
                name: app-sealed-secret
            - configMapRef:
                name: app-configmap
          env:
            - name: APP_URL
              value: https://carnet-de-bord.fabrique.social.gouv.fr
            - name: VITE_GRAPHQL_API_URL
              value: https://hasura-carnet-de-bord.fabrique.social.gouv.fr/v1/graphql
      initContainers:
        - env:
            - name: WAIT_FOR_RETRIES
              value: '24'
          envFrom:
            - secretRef:
                name: azure-pg-user
          image: ghcr.io/socialgouv/docker/wait-for-postgres:6.56.1
          imagePullPolicy: Always
          name: wait-for-postgres
          resources:
            limits:
              cpu: 20m
              memory: 32Mi
            requests:
              cpu: 5m
              memory: 16Mi
---
apiVersion: bitnami.com/v1alpha1
kind: SealedSecret
metadata:
  annotations:
    kapp.k14s.io/disable-default-ownership-label-rules: ''
    kapp.k14s.io/disable-default-label-scoping-rules: ''
    kapp.k14s.io/delete-strategy: orphan
    app.github.com/job: '5678'
    app.github.com/ref: refs/tags/v1.2.3
    app.github.com/repo: socialgouv/carnet-de-bord
    app.github.com/run: '1234'
    app.github.com/sha: '0123456'
  name: app-sealed-secret
  namespace: carnet-de-bord
  labels:
    application: carnet-de-bord
    component: carnet-de-bord
    owner: carnet-de-bord
    team: carnet-de-bord
spec:
  encryptedData:
    HASURA_GRAPHQL_ADMIN_SECRET: >-
      AgAJxIzU+G2q/uBYnpxoH664ZlzQ/iQyJKnwGo36PUZ/p7AVrnz/1hvmHSntjAS8xewSjcSmX77tU5N63iAOc1VYslVnwmDW7QdFdIXp8i9WL9Jh0+DquBbbgt69aJLvu6y9hX2vh8JiziCGz+ikAseJZE5bTPPgvWctWUt/2nZmeENADvKyTORJ25BT0lXPlEhbjndy2VNmVokH51xHwfzqOzDeOiomQo1MhIB9ZYGvM0T1S9w4GRzLy1tne1nqZ2nnzWwo03KmGturdtVYm+nafHT0WI3FPBFG1HIRJdlsESPq1Ta/9UlmAyD7OiFr+kDLFThUPVUsrhxrCxg10U7yfI6rIcSiIDB2TbeWJB9+GUljFpXjTeM1FjKmrumqHUAHscwVBmODYOmt5PK1R5+CvWOXUpvG5OrN7oQDibWpeSSxhndlS6JBic0ZuMTZn6DbEUmGMZyCuscAYH159xgrPd/atWHAZQy2LQR7YTv5KZPkiQlvdX1iM6M4oBdSlGx08EF9V/ke9uG+R9KCtAdlvlyBum5wMtlRN69OLhqGrG5maBaHALyAM1Qlm4Nub5ZvuYTrfhzSq/KTPmz1zhgaX5waMydLh7+pxODfNYb7e5rGRqMOxwGD1lndNZR+jV/E5q9sD9Cwz3Ak/JuKF8kKxZE4K+Y6/Ttw6KM4fjJPmet01Wtq+6nLdPQqgcYSRS8StWjF9atnySIRvef8WQo403mwS5dla5s=
    HASURA_GRAPHQL_JWT_SECRET: >-
      AgBEegrbdsPV2j2Zhv0x5c8sQNkaPgoLD8z3FP4iQsTUstarSTY1+dZYovcYdpCyaA1NlPaaWVWKsq+J0OnBPDdloVBgQnsKCEhfWsM3BI6seOFwXah6VQdjoD2Q3MXu/qXg32Yi3M45YEsGt9QgEJ2erVQrS98Jg/ZvE/8P+dxoSCkUC/E6tpYtBMbC6nTJGHzilOl/Y5c1SkEXbjW6kmR1Dvx3w54ngsC4O0ik4IZ1L5KJAHR0wWoH+6sP1QJ0QgCZV6+cXTnGFj4YJgatUPRk5vXptBrfReNV2fo+Dk5JU4N/SAsQxWwkQVQApC5yOhqMpOmkCxk0TvgHFrWQGS+rdp51T1tGy1Oxkuy/Xf7uLAPQW2gtut7B7LPX2qhAcqWfryatUgHitoAaOJPtyhSO1rxWw9dqgSj+8XJCxGjpuYNyGJecwjC/MwOWdzrpYPACtiTHJz+bl2xPm+3WWmGzEPzL3jjI0sMWWVTVwNRxMsXwNJbviR513hms2H4AOgLNeIBl9MEJedlPdxZIjOGTspjSKeE3U4oZ/ubSIZW9tmMD2TJBTKH3eK/bw/mLf+zliv38RJEX5lBi0nHxIeaKoJhJrxRZjoq1tjOrQVLbZCWTCcQcivpy474gaeHg9LSQC0eTb/jfNtgjQLNZvlk3nyo23pELOOx29tU1i0/e3y+Kdst/qMal/j+DRMZZ+eWmT3XQirWMn8Y2j4hQVlYF9l3h/CccaWTxPDFLL5maH3ImZE7FBHKwb56UMLfV4rlsgQyb2Xn6TciSR3/1fb6KvfU4e8+vwy4AUhrUvjFw7u0uQodYwv7zuhbEgA==
    SMTP_USER: >-
      AgAuDzNdFtUBgrK4XOocMr0xjdH09yjXAtm2W0qm1iS0ybWA3ovePz5Sgw8McOjDPOomgdM1pxWzULYWMLb9MyCmooP/kBgAyVNLG0NpNDmQpgbXRFpeD0l+rGLloXw7n7S2B+F2AI8oHjsRIIOPojo2rG2BvRy+Wad3lU0ejSTU0bTB5XS+UISn1hbo9tKHLpzext7CGjFffxnDXHXE8xlf1bsBLTWXbaiXMlmzn19hoZJOAZ8JSdWcCGQPskMjIxrE5QhL2/af4gG56PNZKTFgckTD+HTir7VAjTbfgCNyPe4YP9Zi2vE8KtyN09VJYE89B6oZpF51n4ykgFMAvlQ/erjZrXYH3k/LQM1lmUO7/L6UiCMnfhxg17Wj8Y4aapHkeurZgoIeF7x4TxTG0r3dH55MyQAZOZNO4IZRP/e6PZe883N8H9sco/mhXi8Rgk8wXeOY3z91W0FN5p44Cy0aOZCSdFSxa+bBMnDPIugcVRd4x13UByEmPHVxT8b6EUsvaegzwQOo6iFfSLQiGjuQammkCrlUsSAkYDXT8AJfCFuImN32fzmGFofJ0f6Bzwpi9sTOwKmLoTQX8k7Mm1tnPM0jbPEZlBtjwBV3QNIf99Okv2AiPkbdlonFnWulpo45PluP5CZTjsmJrGLE8tmdwcCOVlRD3HdVP71UoNmCFt+mbcaV4eDSllZ3iQHRbXwPCkGmFXJmb2JF0eGugl4z9Ho7fUNlFGDqxX/zBPYD5A==
    SMTP_PASS: >-
      AgBa+CCcYvA5RrcB7tCNP4BOZaBPSdw7WvwfL2I3d8zJJEfLv66yUeINcSDYd5QcBtvPN3eVJMhqfMqG906B7vQQ4eVPUIr2jyNQ9loIj2Oawn145FguA3s+xLyqRtpmL5Y9FOaFWTPeycWxTmF5tr1jNOo2xDpQqnmPWgzX4btIYoi452MXAVNAY7LUs3j/NIxg/DiEt6w1muPBoz5tKd7Mr/yu778h/X7rOhPY4zWyjtMnVKs7sc5lRaF7PyNYqosHKTAlDunjjCC4+UjSijdIe/aMgRgVa74E+eHbuG1TE+3HV5X34UUvphTOH6ucgTz7YkbI2exZXhdPpfQ6uW1Y0YgbthSIUOJ4CNQ/78vpAG4t17uibSYbeKVZnvDBy/BfHbTEatiCIe/J6riA/rC2QInfnwNtKmq7CxRz38+Nd07EMCU8+tMUC3Ujy0qxGq7KK1Ah1TDlF+/eSS6zjGQViI1wS4plGdHqsglkSQ2xgvcD9WkgPBV11k6jZLIlkEmyByjVAkvKG7SnSfeVe+/3kC0CfWz5NZPCeZP6fG9HW70jpQcfiY0hP89F8IqCCyKGZxiwdui5qi6saKo6qlm1Hd/QPeMuWgNKE+wCpi8z4if/Yz/4zqSMExhE3mzV5WUfDurDtnrGV+5dl2GCbnZCZ6veT1z3oSyyvOtUPg+TTVpOeMrDuhRBTPbX/VS63pSTkMf7//ryumLskzvaic7Uzj71hDqpiDcKwrew3N+O9A==
    API_PARTICULIER_TOKEN_PE: >-
      AgAzg6Pt5dYiFshwcJqxoBpBzc+qaw6QbrRGdm0+0BWKIyohRyUV5dAGPtzrLXLm2FGpxNbB6+cWG9gBwBiyD1kaOoIb059Q4SMo7tUJX7YU6QuslR4MJkJ47Boy0xjXT4OXl+JcUeaT9ch5v9+VGGgzvGm3wYwKk07iJ9ysdi9FPZzHaWnZtfRbVq0q/tMgEoIfTSTUGRH6gWZzL30/F7thFUZPYg9jERvN8F0x88SVR7Son2VT+jNPC9AOYGBFVsEJKVEKS0iHcrUJIuM/SI4j+TLhtnKoejUnLc8qPkGDVXkWSBYcOpH3XF1LBhhH8QbeIJQPLtz3JqD6F/yz4MaJpC6ncmcnjvo3/NCvHTZ+8DlDg4zX2Y6xZDTXkPNwiovAAZeLn8oqr/1cYwHSIxyDZG/NTA2pWnio95L5s5Z7z11spLDHPZYz3fNhvOnaw3c9PM7pqv61W42G70EXQXVS/Siw1yP7Sk7bBgw1A+sw6nG1jxgsqY+aTWJ4ejXj/9SJR+K5fo0DzHmiljBl8ufJlpc0OMFVnTEHmi4q577p02PtcxbV7WqzDt+RDXIWgyKJbS+qxA6a/AMTvkobTMy9EXn58crestvoHjQmCQPD88DUHutuQPiyK3sKae5GHvXpuiQejJf2GSKxg/d/ycIIBu8NfcOeVSJIl2npRklu5Bd/iLi8OF8M9kmCXtYqWwExlzBf7by+7ZMzy2EyZH9zt7y0b3q7ICjzC2N4Ua9OL+O41rs=
    API_PARTICULIER_TOKEN_CAF: >-
      AgAzg6Pt5dYiFshwcJqxoBpBzc+qaw6QbrRGdm0+0BWKIyohRyUV5dAGPtzrLXLm2FGpxNbB6+cWG9gBwBiyD1kaOoIb059Q4SMo7tUJX7YU6QuslR4MJkJ47Boy0xjXT4OXl+JcUeaT9ch5v9+VGGgzvGm3wYwKk07iJ9ysdi9FPZzHaWnZtfRbVq0q/tMgEoIfTSTUGRH6gWZzL30/F7thFUZPYg9jERvN8F0x88SVR7Son2VT+jNPC9AOYGBFVsEJKVEKS0iHcrUJIuM/SI4j+TLhtnKoejUnLc8qPkGDVXkWSBYcOpH3XF1LBhhH8QbeIJQPLtz3JqD6F/yz4MaJpC6ncmcnjvo3/NCvHTZ+8DlDg4zX2Y6xZDTXkPNwiovAAZeLn8oqr/1cYwHSIxyDZG/NTA2pWnio95L5s5Z7z11spLDHPZYz3fNhvOnaw3c9PM7pqv61W42G70EXQXVS/Siw1yP7Sk7bBgw1A+sw6nG1jxgsqY+aTWJ4ejXj/9SJR+K5fo0DzHmiljBl8ufJlpc0OMFVnTEHmi4q577p02PtcxbV7WqzDt+RDXIWgyKJbS+qxA6a/AMTvkobTMy9EXn58crestvoHjQmCQPD88DUHutuQPiyK3sKae5GHvXpuiQejJf2GSKxg/d/ycIIBu8NfcOeVSJIl2npRklu5Bd/iLi8OF8M9kmCXtYqWwExlzBf7by+7ZMzy2EyZH9zt7y0b3q7ICjzC2N4Ua9OL+O41rs=
    ACTION_SECRET: >-
      AgBt0swVR5RewuLmYSBeGAuq5cscIO7mHWF0bgVqsp7ZaqRY/hiy0zsHVjlGG7R2zd+GQUOc/JkQkK4jOgUFxQhhuVkH7IlwAz0UXdGVQUUPmNH/iQjgqEPOSbWJG8WdPGOku4jHc5PuP0Ni3p2OXQuNsuyy2CKl/HTUjjMfxrZ+JsHUZm85KRCl9ue0iH69BygwYKwJnp/1f94HecIbKqZHfATHx3nNvQCUE4Uy8Qw2DHrKd8Sp+FKx4l431zXJdpZPsF06rf4IR/S4rzELD8ufpjWTTMawwEDQlgapkKJYagaynYi/BL5CbF1u43WRwgGLpDYw8PblaAsZRpdT+wnFMCkTtVhdnUeLvJDXkmVWRoJ670a0YLF8iOI4vfXqnxISgmhbANi8entn3TaAUnQWkA50qo7iiyFryU6d+/wOOlaFQ97H2lTGAn6vHmBLJfaNx1oRXjZo4W7VzJ7Q1gLJJY6BuwgKo+obkQ8mIIfACUOa8C3eftDNm9VpJr7rn/Yj6VxN7s1kZJM0E3LWDxPCoZHhPOdjABmUhMM4MEtqxnK3gatG6NBvptYeZ7Df59wiMVzGLZyX3FR/I5AV+aYezGIAp6/ldk5X9JG9UQa8Ml25Nvr7vucF9ct9xs74ZqJJUetfd1UhiJntjD0Hb5u5FEemnPd4ol6YI2WXgWka4A/0iGdR4/UZVJzJFBmz/Ph5710XeasVHkCvVv3JfzBKrd7BrOk+W7Jp+UwxDtcfZKvbVJh6931sfMR3J4M200PLNH002Q9IUoyAxJmZoovY
template:
  metadata:
    annotations: {}
    name: app-sealed-secret
  type: Opaque
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: app-configmap
  annotations:
    kapp.k14s.io/disable-default-ownership-label-rules: ''
    kapp.k14s.io/disable-default-label-scoping-rules: ''
    kapp.k14s.io/delete-strategy: orphan
    app.github.com/job: '5678'
    app.github.com/ref: refs/tags/v1.2.3
    app.github.com/repo: socialgouv/carnet-de-bord
    app.github.com/run: '1234'
    app.github.com/sha: '0123456'
  labels:
    application: carnet-de-bord
    component: carnet-de-bord
    owner: carnet-de-bord
    team: carnet-de-bord
  namespace: carnet-de-bord
data:
  SMTP_HOST: smtp.tipimail.com
  SMTP_PORT: '2500'
  SMTP_FROM: support.carnet-de-bord@fabrique.social.gouv.fr
  API_PARTICULIER_URL: https://particulier.api.gouv.fr/api
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app: app
    application: carnet-de-bord
    component: carnet-de-bord
    owner: carnet-de-bord
    team: carnet-de-bord
  name: app
  annotations:
    kapp.k14s.io/disable-default-ownership-label-rules: ''
    kapp.k14s.io/disable-default-label-scoping-rules: ''
    kapp.k14s.io/delete-strategy: orphan
    app.github.com/job: '5678'
    app.github.com/ref: refs/tags/v1.2.3
    app.github.com/repo: socialgouv/carnet-de-bord
    app.github.com/run: '1234'
    app.github.com/sha: '0123456'
  namespace: carnet-de-bord
spec:
  ports:
    - name: http
      port: 80
      targetPort: 3000
  selector:
    app: app
  type: ClusterIP
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  annotations:
    kubernetes.io/ingress.class: nginx
    cert-manager.io/cluster-issuer: letsencrypt-prod
    kubernetes.io/tls-acme: 'true'
    kapp.k14s.io/disable-default-ownership-label-rules: ''
    kapp.k14s.io/disable-default-label-scoping-rules: ''
    kapp.k14s.io/delete-strategy: orphan
    app.github.com/job: '5678'
    app.github.com/ref: refs/tags/v1.2.3
    app.github.com/repo: socialgouv/carnet-de-bord
    app.github.com/run: '1234'
    app.github.com/sha: '0123456'
  labels:
    app: app
    application: carnet-de-bord
    component: carnet-de-bord
    owner: carnet-de-bord
    team: carnet-de-bord
  name: app
  namespace: carnet-de-bord
spec:
  rules:
    - host: carnet-de-bord.fabrique.social.gouv.fr
      http:
        paths:
          - backend:
              service:
                name: app
                port:
                  name: http
            path: /
            pathType: Prefix
  tls:
    - hosts:
        - carnet-de-bord.fabrique.social.gouv.fr
      secretName: app-crt
---
apiVersion: apps/v1
kind: Deployment
metadata:
  annotations:
    kapp.k14s.io/disable-default-ownership-label-rules: ''
    kapp.k14s.io/disable-default-label-scoping-rules: ''
    kapp.k14s.io/delete-strategy: orphan
    app.github.com/job: '5678'
    app.github.com/ref: refs/tags/v1.2.3
    app.github.com/repo: socialgouv/carnet-de-bord
    app.github.com/run: '1234'
    app.github.com/sha: '0123456'
  labels:
    app: hasura
    application: carnet-de-bord
    component: hasura
    owner: carnet-de-bord
    team: carnet-de-bord
  name: hasura
  namespace: carnet-de-bord
spec:
  replicas: 1
  selector:
    matchLabels:
      app: hasura
  template:
    metadata:
      annotations:
        kapp.k14s.io/disable-default-ownership-label-rules: ''
        kapp.k14s.io/disable-default-label-scoping-rules: ''
        kapp.k14s.io/delete-strategy: orphan
        app.github.com/job: '5678'
        app.github.com/ref: refs/tags/v1.2.3
        app.github.com/repo: socialgouv/carnet-de-bord
        app.github.com/run: '1234'
        app.github.com/sha: '0123456'
      labels:
        app: hasura
        application: carnet-de-bord
        component: hasura
        owner: carnet-de-bord
        team: carnet-de-bord
    spec:
      containers:
        - image: ghcr.io/socialgouv/carnet-de-bord/hasura:1.2.3
          livenessProbe:
            failureThreshold: 6
            httpGet:
              path: /healthz
              port: http
            initialDelaySeconds: 30
            periodSeconds: 5
            timeoutSeconds: 5
          name: hasura
          ports:
            - containerPort: 80
              name: http
          readinessProbe:
            failureThreshold: 15
            httpGet:
              path: /healthz
              port: http
            initialDelaySeconds: 0
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: 500m
              memory: 512Mi
            requests:
              cpu: 100m
              memory: 64Mi
          startupProbe:
            failureThreshold: 20
            httpGet:
              path: /healthz
              port: http
            periodSeconds: 10
            initialDelaySeconds: 30
            successThreshold: 1
            timeoutSeconds: 5
          envFrom:
            - secretRef:
                name: azure-pg-user
            - secretRef:
                name: hasura-sealed-secret
            - configMapRef:
                name: hasura-configmap
      initContainers:
        - env:
            - name: WAIT_FOR_RETRIES
              value: '24'
          envFrom:
            - secretRef:
                name: azure-pg-user
          image: ghcr.io/socialgouv/docker/wait-for-postgres:6.56.1
          imagePullPolicy: Always
          name: wait-for-postgres
          resources:
            limits:
              cpu: 20m
              memory: 32Mi
            requests:
              cpu: 5m
              memory: 16Mi
---
apiVersion: bitnami.com/v1alpha1
kind: SealedSecret
metadata:
  annotations:
    kapp.k14s.io/disable-default-ownership-label-rules: ''
    kapp.k14s.io/disable-default-label-scoping-rules: ''
    kapp.k14s.io/delete-strategy: orphan
    app.github.com/job: '5678'
    app.github.com/ref: refs/tags/v1.2.3
    app.github.com/repo: socialgouv/carnet-de-bord
    app.github.com/run: '1234'
    app.github.com/sha: '0123456'
  name: hasura-sealed-secret
  namespace: carnet-de-bord
  labels:
    application: carnet-de-bord
    component: hasura
    owner: carnet-de-bord
    team: carnet-de-bord
spec:
  encryptedData:
    HASURA_GRAPHQL_ADMIN_SECRET: >-
      AgAmZ8LU55j/AQY3cAysAqbfgRI+B7w+ihJQwgcnUWIlCV7wESgjOaVx3WHL0oi25qoNN9JPTTdLoriYze1lTo3ET3e7kkLWRZXMnQHQB/v/qoflxdCAbIz/Skz1AdEwORZMG8OnmLfLlW9o4vhh5x32B7cpaGOTTtoCI8GvvJQuldRQm68+KwX3QsXJAvwgWtjpmfZaHCyOK/pbgb9S5s4RF4HTdtZF1kXasLNzk81jjfZpfh/D3WiORyeNtUBqYkImTuChe0byPdVuMW78stXcrL5/wdl0OTLg5ni96V/r4aSCEAvKLsK1azZVp6ayjdaStjc39/3Z1PDrzr9rjbYWt+b5yPoMyny6tzidu4n2j3IU+kgUHKxdax60DHZq1HS+zpP+dR43i+MTdYBgtG3MjYEO0Bx/kxp0YCoOKBkcltZ3fr4DMdP64WIRIkxgmagDmnDnY4c6p0FXcNQUYnl0ZNrlp9Dp7q/QQcmCTqIcZ1oAcHzx9KMxOZwCztQ+mb2q6xmKNv6dqSmOxRV1Z4nYeQAiW+rvMjLNdCdrow7vtC/Rc/akYDelRcO2vNYq2VGoSG3+VDZwxIn3T3y8CEUc0eqXcLxGhA2l4JMbnAR3rgbk5B6Tj6f8+6FqOqGtftpJBx+KAakmBCYQ2tv2a6lO3C6VmTcRzkKSjFIdk85gHNb8LoghOVA9O1WRA6NlFUOi5Cu5385LzEfvP26rP7BPNiWT2L1aaE4=
    HASURA_GRAPHQL_JWT_SECRET: >-
      AgCbJl5DKv0GOCXw16ETXZSa7CIfAdoZvsDWRp3KMBbxsOmWXLEH7UsFksf6mKZHwoGRaOmpkwiCbVWiArco0OphdaSbHIkAd3JJZCEIxSyOO9Jjmj8r2ZUcvDJdd6A/FqheLlfjnsCGJWUkxB9bL91AjwVvN4kn7gupqSTyXNu14z93pbmfuYJn1WM0dqtbqRZemYI/KKGWLxXGYpPxFP4R3eR7CUl6JHz039YkBG3e9qz2kzjnZMca+NPB+eayKINg03XnHHbClqQ4qzYuzvtvP31VqWZNHQUJhCXduweO9zUcZ4NX31W1aSXIEoT8wTCPdXo3RcF+/o6dU8IVxY160qqK9oRUQQ90keS811v1Vo4l9frAZBGuYQRP1E8BsrEdfRfTiwTQ7a2jDuvRs3C6Fpo4JgzRLoLQjaOESxfoVspGeR3JCXeAyWVQt0xg7WD8nRlpn2c1n9EccKjsgyhA0/TIJ37k62hES6+j5WOD9xJozNz9XJnsc+hHbgDvi+077e5fPghaHWvaH+g2j+2VswWq2rcd9DrYljG81TNdGwZoZV6bmOKjfr4RkvjSnNPHNT52zUVBDdFUv0nOIefeU480YA/wbAsdyI7x+uU14yi0FRB9lU5UEgN1/cEZiYNVFpE84lobWy4Z4lgRnpHi6n1cVvkvKPjF2Pu3F5b/3l+Ga/rQgYg+hIUSoykqiMPwFopyl4HcwDJ43nZuFmtPmfwPCV3BwdAgzYJoSTktOaVhxjrZvDNtrgvnJHn0N4KaAQVGw+FXTXiYDM0ZYa99zUZ+4mE35ojFCZdmVIadZjEOswC8pYKDGxqHxw==
    HASURA_GRAPHQL_DATABASE_URL: >-
      AgBgTYQQnOMqGzIshfFGlwd6LX8lZc8IK8owLUs+aKtEoUE+dkjMy0GRs+8EwWUqNeD4pmWAUsbvfwbhSZAPLQvZMF2MCVmandsCuM2nd4JKfBmNf8CAyMQhS7F3cWyzcfpY0KPRoY5+9FpPKAFjj3XTQtbXbqOKeqGhWoKzj4Ot4VGsEZ1onP2mp24mykLzrnUCcboRtRWmaaTCnvmTQ8dTWqqjLebf1Ldk2lgtUgCyGavx5ynwSII09j2/cwVf0Jex5XZ768gjIoZlBgFWlYuen2lCPIvILknU72hMQlP1blTHIQ99aFfdOeTERw/DNlRHtFeo2JSfM1X+z2hgapsx2VvGQQdGnAJvNF0QSzSUJctzMJ/d2SLhQnqkXWHAnBoY9VVwEney6vnOII1Pvyu0+fbdrQypCWRGx4Hqfridbg4MTIcywxuvbvanWKT20VnPoIoSCXDEfTnsdrRT5WqvhnFJqyDvmX4armdYKHtKGy5OLtoWTthRxvuMvrDqPJOf/rPY77WRExbFKuFg4j935hs3IwvEA6rAcufnxyoLGIf5riMAELDpFQszKsC2HyDH6KEYcW9KsFuItdRha6wtdA/dOG1tyJ9BsndJArXVpNx8m98QgRszdDOP5dDMAIGfvbzXof5yBRPvILt635LxtpBCz76milk7ZccMRnTPAJiybBadIhP60el4CWgeD97o96zaJulgl5l5Su/Rt44msmNLAxkh6k3+pvPbwyZ+lfYjChPHfsLKsW9KqgISm1AlpTk/PiFR9ScMolIFnttSLADS+LOiNL5RhPf7HLBZt6BKMgo3RDxFH0nSTdoMn4X8OtwFzewUKYzE/kXvpwGo7QcboyM3JdgmYD6msqKPodyVUe6Wpr00HImlYWpjqHp4/q98FXPWbGgH7FPM+pmK/WxQ0dSnSNRtjWES+wcCarU=
    ACTION_SECRET: >-
      AgBgYvVpNaKxoVu1AfrG7J4f2dGuRIZbVQ1q2duKL4ub7sjdGpYig3Kv8yyuXkMHsuzvYdGalRJrGYAD2Ldf2GnarzszEWb7Xvb5AVTuxoEL1tHqJvbZ66uoejIz7ZDtTYOfcfH0bujjWLTQzltIwdhTYV7EcOFnu2tfS87EV0LwywFMuh+RcdSyyq13L1hqhZXpNoRXKT92/5lMZ0woMANeTpqljboSjNloA187uxzieZxjatNvO820cJxpt1o67awJWYtKcaH7sVPNaprWpKB+N9n3BYwlHWc7hQjHqlY2P6bUe0+EztTE+c4XZptbtDJaUVCxrZkdJJZLzeZRmWCCMcd8FMoZeydDNPDYgdUjSl9IXSZHropbydJM4OW7sFfOW+eno8n2Aau3/ZqsOSnylZpkgxwMEuBuFRNw08uMXcFbTKalzz7A4qv11LnhPNDgiqqKc/6r0moSX21MFFr33TDanEcYYPnnoPjcD+zQoRgxJ+Xa4GzLfEoC0iS/o/fLnLJZfM548+zTItUSMSGAb2/SjSiNH/ocwy54nom26RS8tEJAXheEojvvionjYfI1thVTD8puhWP5kjl0TW4Xsi1rd7+jhVPjx86Fk9ynaAli+4w5/p+Y9LpWe8yb2ZepYpRSVlwEOjUuhq0QyUN58C4Cb4wy9W2gjypUNBQ4Nmx3yaUAGfRSbfsQ0i7GPDB1+b2UGAHjPF8YhFx22RL6MBE08z2CFsC8cB2HwJy1j/nvC+RDzekpFVoTOrNnW5a7lYWV8nv0Q2o02zirvtu5
  template:
    metadata:
      annotations:
        kapp.k14s.io/disable-default-ownership-label-rules: ''
        kapp.k14s.io/disable-default-label-scoping-rules: ''
        kapp.k14s.io/delete-strategy: orphan
        app.github.com/job: '5678'
        app.github.com/ref: refs/tags/v1.2.3
        app.github.com/repo: socialgouv/carnet-de-bord
        app.github.com/run: '1234'
        app.github.com/sha: '0123456'
      name: hasura-sealed-secret
      labels:
        application: carnet-de-bord
        component: hasura
        owner: carnet-de-bord
        team: carnet-de-bord
    type: Opaque
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: hasura-configmap
  annotations:
    kapp.k14s.io/disable-default-ownership-label-rules: ''
    kapp.k14s.io/disable-default-label-scoping-rules: ''
    kapp.k14s.io/delete-strategy: orphan
    app.github.com/job: '5678'
    app.github.com/ref: refs/tags/v1.2.3
    app.github.com/repo: socialgouv/carnet-de-bord
    app.github.com/run: '1234'
    app.github.com/sha: '0123456'
  labels:
    application: carnet-de-bord
    component: hasura
    owner: carnet-de-bord
    team: carnet-de-bord
  namespace: carnet-de-bord
data:
  HASURA_GRAPHQL_ENABLE_CONSOLE: 'false'
  HASURA_GRAPHQL_UNAUTHORIZED_ROLE: anonymous
  HASURA_GRAPHQL_ENABLED_LOG_TYPES: startup, http-log, webhook-log, websocket-log, query-log
  HASURA_GRAPHQL_NO_OF_RETRIES: '5'
  HASURA_GRAPHQL_SERVER_PORT: '80'
  HASURA_GRAPHQL_LOG_LEVEL: debug
  HASURA_GRAPHQL_MIGRATIONS_SERVER_TIMEOUT: '180'
  ACTION_BASE_URL: http://app/actions
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app: hasura
    application: carnet-de-bord
    component: hasura
    owner: carnet-de-bord
    team: carnet-de-bord
  name: hasura
  annotations:
    kapp.k14s.io/disable-default-ownership-label-rules: ''
    kapp.k14s.io/disable-default-label-scoping-rules: ''
    kapp.k14s.io/delete-strategy: orphan
    app.github.com/job: '5678'
    app.github.com/ref: refs/tags/v1.2.3
    app.github.com/repo: socialgouv/carnet-de-bord
    app.github.com/run: '1234'
    app.github.com/sha: '0123456'
  namespace: carnet-de-bord
spec:
  ports:
    - name: http
      port: 80
      targetPort: 80
  selector:
    app: hasura
  type: ClusterIP
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  annotations:
    kubernetes.io/ingress.class: nginx
    cert-manager.io/cluster-issuer: letsencrypt-prod
    kubernetes.io/tls-acme: 'true'
    kapp.k14s.io/disable-default-ownership-label-rules: ''
    kapp.k14s.io/disable-default-label-scoping-rules: ''
    kapp.k14s.io/delete-strategy: orphan
    app.github.com/job: '5678'
    app.github.com/ref: refs/tags/v1.2.3
    app.github.com/repo: socialgouv/carnet-de-bord
    app.github.com/run: '1234'
    app.github.com/sha: '0123456'
  labels:
    app: hasura
    application: carnet-de-bord
    component: hasura
    owner: carnet-de-bord
    team: carnet-de-bord
  name: hasura
  namespace: carnet-de-bord
spec:
  rules:
    - host: hasura-carnet-de-bord.fabrique.social.gouv.fr
      http:
        paths:
          - backend:
              service:
                name: hasura
                port:
                  name: http
            path: /
            pathType: Prefix
  tls:
    - hosts:
        - hasura-carnet-de-bord.fabrique.social.gouv.fr
      secretName: hasura-crt
---
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: netpol-carnet-de-bord
  namespace: carnet-de-bord
spec:
  ingress:
    - from:
        - podSelector: {}
    - from:
        - namespaceSelector:
            matchLabels:
              network-policy/source: ingress-controller
    - from:
        - namespaceSelector:
            matchLabels:
              network-policy/source: monitoring
  podSelector: {}
  policyTypes:
    - Ingress
"
`;
